<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>MOVIBAZAAR</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&family=Roboto&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <nav class="header navbar-default">
      <div class="container">
        <div class="navbar-header">
          <a class="navbar-brand" id="title" href="index.html">MOVIBAZAAR</a>
        </div>
      </div>
    </nav>

    <div class="container">
      <div id="movie" class="well">
        <div class="footer">
          <div class="">
            <hr />
            <a href="index.html" class="btn btn-default">Go Back To Search</a>
          </div>
        </div>
      </div>
    </div>
    <script>
      (function () {
        console.log("startted");
        // Step 1. Get the id from the session storage. Insert the code below
        // Step 2. Does a api call to fetch the additional details and update the page
        const movieId = sessionStorage.getItem("movieId");
        const API_BASE = `/movie/${movieId}`;
        return fetch(API_BASE)
          .then((res) => res.json())
          .then((data) => {
            loadMovie(data);
            console.log("Fetch start");
          })
          .catch((err) => console.log(err));
      })();
      const loadMovie = (movie) => {
        const output = `<div class="row" >
          <div class="image">
            <img
              src=${movie.Poster}
              class="thumbnail"
            />
          </div>
          <h2 id="title">${movie.Title}</h2>
          <div class="details-wrapper">
            <ul class="list-group">
              <li id="genre"><strong>Genre : ${movie.Type}</strong></li>
                <li id="release"><strong>Released : ${movie.Year}</strong></li>
                <li id="director"><strong>Director : updating soon...</strong></li>
                <li id="actors"><strong>Actors : updating soon...</strong></li>   
            </ul>
          </div>
        </div>`;
        document.getElementById("movie").innerHTML = output;
      };
    </script>
  </body>
</html>
